=================
Crate JDBC Driver
=================

JDBC is a core API of Java 1.1 and later. It provides a standard set of
interfaces to SQL-compliant databases.

Crate provides a type 4 JDBC driver. The driver is written in Pure Java, and
communicates in the database system's own network protocol. Because of this,
the driver is platform independent.

.. note:: This JDBC driver requires Crate 0.38.0 or newer!

Download and Setup
==================

The ``crate-jdbc`` jar files are hosted on `Bintray`_ and available via `JCenter`_.

Additionally to ``crate-jdbc`` there is also a standalone version
named ``crate-jdbc-standalone`` which already includes its dependencies.

.. note:: ``crate-jdbc-standalone`` should not be used in Maven projects,
    but might want to be used e.g. as a driver for the `Squirrel`_ SQL client.

You can download the latest standalone version directly from the
`Bintray Repository <https://bintray.com/crate/crate/crate-jdbc/view/files/io/crate/crate-jdbc-standalone>`_.

If you want to use ``crate-jdbc`` with your Maven project you need to
add the Bintray repository to your ``pom.xml``::

    ...
    <repositories>
        ...
        <repository>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <id>central</id>
            <name>bintray</name>
            <url>http://dl.bintray.com/crate/crate</url>
        </repository>
    </repositories>
    ...
    <dependencies>
        ...
        <dependency>
            <groupId>io.crate</groupId>
            <artifactId>crate-jdbc</artifactId>
            <version>...</version>
        </dependency>
    </dependencies>
    ...

Alternatively you can follow the instructions on the Bintray repository overview page by clicking the "Set me up!" button.


JDBC Driver Class
=================

The Crate JDBC driver class is ``io.crate.client.jdbc.CrateDriver``.

JDBC URL Format
===============

With JDBC, a database is represented by a URL (Uniform Resource Locator).
With Crate, this takes the following form::

    [jdbc:]crate://<host>:<transport-port>[,<host>:<transport-port> , ...]

The ``jdbc:`` prefix is optional. For example. To connect to a single server
the following two formats are both allowed::

    crate://localhost:4300

::

    jdbc:crate://localhost:4300


In order to connect to multiple servers multiple ``<host>:<transport-port>``
pairs can be specified by delimit them using a comma::

    crate://host1.example.com:4300,host2.example.com:4300


Compatibility
=============

JDBC
----

This JDBC driver complies to the `JDBC 4.1`_ standard as good as possible and reasonable for
a Crate driver. The following mandatory features are not supported:

* ``java.sql.ParameterMetaData`` as returned by e.g. ``java.sql.PreparedStatement``
* ``DataSource`` is not implemented
* ``CallableStatement`` is not implemented as CRATE has no stored procedures to call

For further details about compatibility with all possible JDBC features,
see the ``ResultSet``, ``ResultSetMetaData`` and ``DatabaseMetaData`` implementations.

Though only an optional feature, it is still worth mentioning:

* the ``ResultSet`` implementation is read only (``TYPE_FORWARD_ONLY``, ``CONCUR_READ_ONLY``),
  so changes to a ``ResultSet`` are not supported. Though DDL and DML statements are supported
  using the ``Statement`` and ``PreparedStatement`` interfaces.

Crate
-----

This JDBC driver can only be used with *Crate version 0.38.0* and higher.

Besides using the most recent version, it is recommended to use the JDBC driver version
whose crate-client dependency matches the Crate server.


.. _`Bintray`: https://bintray.com/crate/crate/

.. _`JCenter`: https://bintray.com/bintray/jcenter

.. _`Squirrel`: http://squirrel-sql.sourceforge.net/

.. _`JDBC 4.1`: http://download.oracle.com/otn-pub/jcp/jdbc-4_1-mrel-spec/jdbc4.1-fr-spec.pdf
